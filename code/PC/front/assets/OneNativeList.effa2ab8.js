var ie=Object.defineProperty;var O=Object.getOwnPropertySymbols;var ue=Object.prototype.hasOwnProperty,se=Object.prototype.propertyIsEnumerable;var M=(m,l,t)=>l in m?ie(m,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):m[l]=t,P=(m,l)=>{for(var t in l||(l={}))ue.call(l,t)&&M(m,t,l[t]);if(O)for(var t of O(l))se.call(l,t)&&M(m,t,l[t]);return m};var V=(m,l,t)=>new Promise((c,p)=>{var C=n=>{try{g(t.next(n))}catch(d){p(d)}},x=n=>{try{g(t.throw(n))}catch(d){p(d)}},g=n=>n.done?c(n.value):Promise.resolve(n.value).then(C,x);g((t=t.apply(m,l)).next())});import{j as re,C as i,n as ce,f as w,a8 as de,X as me,r as f,s as y,Q as b,w as a,aW as u,v as o,y as v,R as pe,z as H,t as F,K as D,ea as fe,a2 as _e,Z as I,a as ve,c3 as B,u as ge,at as he}from"./index.d13d32e3.js";import{g as ye}from"./Area.34bf1346.js";import{_ as xe}from"./OneNativeModal.vue_vue_type_script_setup_true_lang.5c2f9412.js";import{i as Ce}from"./api.ae3b9cbd.js";import{downloadFile as we}from"./renderUtils.2bc75984.js";import"./areaDataUtil.b0d6c4f6.js";import"./OneNativeForm.6c8084f9.js";import"./JAddInput.ec01e271.js";import"./useFormItem.7e3b9788.js";import"./index.1c9272fa.js";import"./BasicModal.d291574e.js";import"./useWindowSizeFn.67dc54bf.js";import"./props.b623f34d.js";import"./index.61b0c164.js";import"./bem.0a70e06a.js";import"./props.1766c95e.js";import"./useContextMenu.17d08add.js";import"./index.89ad7068.js";import"./onMountedOrActivated.a5139741.js";import"./index.9bf7bffc.js";import"./htmlmixed.470d5886.js";import"./vue.aa2fc71b.js";/* empty css             */import"./depart.api.0bd5897e.js";import"./JUpload.vue_vue_type_style_index_0_lang.e5aaf763.js";import"./functional.fdb540f5.js";const ke={class:"table-operator"},Ee={class:"ant-alert ant-alert-info",style:{"margin-bottom":"16px"}},Se=u("i",{class:"anticon anticon-info-circle ant-alert-icon"},null,-1),be={style:{"font-weight":"600"}},Fe={slot:"htmlSlot","slot-scope":"text"},De=["innerHTML"],Ie={key:0,style:{"font-size":"12px","font-style":"italic"}},Be=["src","preview"],Te={key:0,style:{"font-size":"12px","font-style":"italic"}},Re=["onClick"],je={class:"ant-dropdown-link"},Ae=["onClick"],ze=u("a",null,"\u5220\u9664",-1),rt=re({__name:"OneNativeList",setup(m){i(!1);const l=i({}),t=i(!1),c=i([]),p=i();ce();const C=i([{title:"\u6587\u672C",align:"center",dataIndex:"name"},{title:"\u5B57\u5178\u4E0B\u62C9",align:"center",dataIndex:"xiala",customRender:({text:e})=>e?w(c.value.xiala,e):""},{title:"\u5B57\u5178\u5355\u9009",align:"center",dataIndex:"danxuan",customRender:({text:e})=>e?w(c.value.danxuan,e):""},{title:"\u5B57\u5178\u591A\u9009",align:"center",dataIndex:"duoxuan",customRender:({text:e})=>e?w(c.value.duoxuan,e):""},{title:"\u5F00\u5173",align:"center",dataIndex:"kaiguan",customRender:({text:e})=>e?w(c.value.kaiguan,e):""},{title:"\u65E5\u671F",align:"center",dataIndex:"riqi",customRender:function({text:e}){return e?e.length>10?e.substr(0,10):e:""}},{title:"\u5E74\u6708\u65E5\u65F6\u5206\u79D2",align:"center",dataIndex:"nyrsfm"},{title:"\u65F6\u95F4",align:"center",dataIndex:"shijian"},{title:"\u6587\u4EF6",align:"center",dataIndex:"wenjian",slots:{customRender:"fileSlot"}},{title:"\u56FE\u7247",align:"center",dataIndex:"tupian",slots:{customRender:"imgSlot"}},{title:"\u64CD\u4F5C",dataIndex:"action",align:"center",fixed:"right",width:147,slots:{customRender:"action"}}]),x=de({list:"/test/jeecgDemo/oneNative/list",delete:"/test/jeecgDemo/oneNative/delete",exportXls:"/test/jeecgDemo/oneNative/exportXls",importExcel:"test/jeecgDemo/oneNative/importExcel"}),g=i([]);i(!1);const n=i({current:1,pageSize:10,pageSizeOptions:["10","20","30"],showTotal:(e,s)=>s[0]+"-"+s[1]+" \u5171"+e+"\u6761",showQuickJumper:!0,showSizeChanger:!0,total:0}),d=i([]),k=i([]),T=i({column:"createTime",order:"desc"}),R=i({}),{createMessage:K}=ge();function Q(e,s){d.value=e,k.value=s}function X({pagination:e,filters:s,sorter:r}){n.value=e,T.value=r,R.value=P({},s)}function $(){p.value.disableSubmit=!1,p.value.add()}function L(){d.value=[],k.value=[]}function U(){_e.confirm({title:"\u786E\u8BA4\u5220\u9664",content:"\u662F\u5426\u5220\u9664\u9009\u4E2D\u6570\u636E",okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",onOk:()=>{I.delete({url:x.delete,data:{ids:d.value}},{joinParamsToUrl:!0}).then(()=>{E()})}})}function q(){let e=Object.assign(l.value,T.value,R.value);return e.field=J(),e.pageNo=n.value.current,e.pageSize=n.value.pageSize,he(e)}function J(){let e="id,";return C.value.forEach(function(s){e+=","+s.dataIndex}),e}function j(e){e===1&&(n.value.current=1),t.value=!0;let s=q();I.get({url:x.list,params:s},{isTransformResponse:!1}).then(r=>{r.success?(g.value=r.result.records,r.result&&r.result.total?n.value.total=r.result.total:n.value.total=0):K.warning(r.message)}).finally(()=>{t.value=!1})}function W(e){return e&&e.indexOf(",")>0&&(e=e.substring(0,e.indexOf(","))),ve(e)}function Z(e){p.value.disableSubmit=!1,p.value.edit(e)}function G(e){p.value.disableSubmit=!0,p.value.edit(e)}function Y(e){I.delete({url:x.delete,data:{ids:e}},{joinParamsToUrl:!0}).then(s=>{E()})}function ee(){return V(this,null,function*(){c.value.flzds=yield Ce({code:"B01"}),c.value.xiala=yield B("sex"),c.value.danxuan=yield B("sex"),c.value.duoxuan=yield B("urgent_level")})}function E(){d.value=[],k.value=[],j(1)}return me(()=>{c.value.kaiguan=[{text:"\u662F",value:"1"},{text:"\u5426",value:"2"}],j(),ee()}),(e,s)=>{const r=f("a-button"),A=f("Icon"),S=f("a-menu-item"),z=f("a-menu"),N=f("a-dropdown"),te=f("a-divider"),ae=f("a-icon"),ne=f("a-table"),oe=f("a-card");return y(),b(oe,{bordered:!1},{default:a(()=>[u("div",ke,[o(r,{onClick:$,type:"primary",preIcon:"ant-design:plus"},{default:a(()=>[v("\u65B0\u589E")]),_:1}),d.value.length>0?(y(),b(N,{key:0},{overlay:a(()=>[o(z,null,{default:a(()=>[o(S,{key:"1",onClick:U},{default:a(()=>[o(A,{icon:"ant-design:delete-outlined"}),v(" \u5220\u9664 ")]),_:1})]),_:1})]),default:a(()=>[o(r,null,{default:a(()=>[v("\u6279\u91CF\u64CD\u4F5C "),o(A,{icon:"mdi:chevron-down"})]),_:1})]),_:1})):pe("",!0)]),u("div",null,[u("div",Ee,[Se,v(" \u5DF2\u9009\u62E9 "),u("a",be,H(d.value.length),1),v("\u9879 "),u("a",{style:{"margin-left":"24px"},onClick:L},"\u6E05\u7A7A")]),o(ne,{ref:"table",size:"middle",scroll:{x:!0},bordered:"",rowKey:"id",class:"j-table-force-nowrap",columns:C.value,dataSource:g.value,pagination:n.value,loading:t.value,rowSelection:{selectedRowKeys:d.value,onChange:Q},onChange:X},{imgSlot:a(({text:_,record:h})=>[_?(y(),F("img",{key:1,src:W(_),preview:h.id,alt:"",class:"anty-img-wrap"},null,8,Be)):(y(),F("span",Ie,"\u65E0\u56FE\u7247"))]),pcaSlot:a(({text:_})=>[u("div",null,H(D(ye)(_)),1)]),fileSlot:a(({text:_})=>[_?(y(),b(r,{key:1,ghost:!0,type:"primary",preIcon:"ant-design:download",size:"small",onClick:h=>D(we)(_)},{default:a(()=>[v(" \u4E0B\u8F7D ")]),_:2},1032,["onClick"])):(y(),F("span",Te,"\u65E0\u6587\u4EF6"))]),action:a(({text:_,record:h})=>[u("a",{onClick:le=>Z(h)},"\u7F16\u8F91",8,Re),o(te,{type:"vertical"}),o(N,null,{overlay:a(()=>[o(z,{class:"antd-more"},{default:a(()=>[o(S,null,{default:a(()=>[u("a",{onClick:le=>G(h)},"\u8BE6\u60C5",8,Ae)]),_:2},1024),o(S,null,{default:a(()=>[o(D(fe),{title:"\u786E\u5B9A\u5220\u9664\u5417?",onConfirm:()=>Y(h.id)},{default:a(()=>[ze]),_:2},1032,["onConfirm"])]),_:2},1024)]),_:2},1024)]),default:a(()=>[u("a",je,[v("\u66F4\u591A "),o(ae,{type:"down"})])]),_:2},1024)]),default:a(()=>[u("template",Fe,[u("div",{innerHTML:e.text},null,8,De)])]),_:1},8,["columns","dataSource","pagination","loading","rowSelection"])]),o(xe,{ref_key:"oneProtogenesisModal",ref:p,onOk:E},null,512)]),_:1})}}});export{rt as default};
