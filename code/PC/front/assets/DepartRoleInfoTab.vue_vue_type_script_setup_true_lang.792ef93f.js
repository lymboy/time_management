var G=Object.defineProperty,H=Object.defineProperties;var J=Object.getOwnPropertyDescriptors;var x=Object.getOwnPropertySymbols;var Q=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable;var y=(n,o,e)=>o in n?G(n,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[o]=e,F=(n,o)=>{for(var e in o||(o={}))Q.call(o,e)&&y(n,e,o[e]);if(x)for(var e of x(o))Y.call(o,e)&&y(n,e,o[e]);return n},A=(n,o)=>H(n,J(o));var w=(n,o,e)=>new Promise((d,m)=>{var _=s=>{try{l(e.next(s))}catch(u){m(u)}},g=s=>{try{l(e.throw(s))}catch(u){m(u)}},l=s=>s.done?d(s.value):Promise.resolve(s.value).then(_,g);l((e=e.apply(n,o)).next())});import Z from"./BasicTable.7f769694.js";import{T as ee}from"./componentMap.6f8f51f6.js";import"./BasicTable.vue_vue_type_style_index_0_lang.734e51fc.js";import"./TableImg.vue_vue_type_style_index_0_lang.c653d5f6.js";import"./index.1c9272fa.js";import{a as te}from"./index.57c0270a.js";import{useListPage as oe}from"./useListPage.6b1e9ff2.js";import{_ as ne}from"./DepartRoleModal.vue_vue_type_script_setup_true_lang.c26cab8d.js";import{_ as ae}from"./DepartRoleAuthDrawer.vue_vue_type_script_setup_true_lang.ad8ac930.js";import{f as re,g as le}from"./depart.user.api.fdf3773d.js";import{d as se,a as ie}from"./depart.user.data.f92c25d5.js";import{j as ue,bj as ce,m as pe,bI as de,E as me,X as fe,r as c,s as v,t as E,v as a,w as i,y as _e,K as r,ax as k,R as ge,aW as B}from"./index.d13d32e3.js";const be=B("span",null,"\u5220\u9664",-1),we=B("span",null,"\u6279\u91CF\u64CD\u4F5C ",-1),Me=ue({__name:"DepartRoleInfoTab",props:{data:{require:!0,type:Object}},emits:["register"],setup(n){const o=n;ce("prefixCls");const e=pe(()=>{var t;return(t=o.data)==null?void 0:t.id}),d={xs:24,sm:24,md:24,lg:12,xl:12,xxl:8},{tableContext:m,createMessage:_}=oe({tableProps:{api:re,columns:se,canResize:!1,formConfig:{labelWidth:100,schemas:ie,baseColProps:d,labelAlign:"left",labelCol:{xs:24,sm:24,md:24,lg:9,xl:7,xxl:6},wrapperCol:{},actionColOptions:A(F({},d),{style:{textAlign:"left"}})},beforeFetch(t){t.deptId=e.value}}}),[g,{reload:l,setProps:s,setLoading:u,updateTableDataRecord:T},{rowSelection:M,selectedRowKeys:b}]=m,[S,C]=de(),[I,j]=te();me(()=>o.data,()=>l()),fe(()=>{l()});function P(){b.value=[]}function N(){C.openModal(!0,{isUpdate:!1,record:{}})}function V(t){C.openModal(!0,{isUpdate:!0,record:t})}function L(t){j.openDrawer(!0,{record:t})}function D(t,p){return w(this,null,function*(){if(!e.value)_.warning("\u8BF7\u5148\u9009\u62E9\u4E00\u4E2A\u90E8\u95E8");else{u(!0);let f=r(t).join(",");try{return yield le({ids:f},p),l()}finally{u(!1)}}return Promise.reject()})}function K(){return w(this,null,function*(){try{yield D(b,!0),P()}catch(t){}})}function O({isUpdate:t,values:p}){t?T(p.id,p):l()}function U(t){return[{label:"\u7F16\u8F91",onClick:V.bind(null,t)}]}function W(t){return[{label:"\u6388\u6743",onClick:L.bind(null,t)},{label:"\u5220\u9664",color:"error",popConfirm:{title:"\u786E\u8BA4\u8981\u5220\u9664\u5417\uFF1F",confirm:D.bind(null,[t.id],!1)}}]}return(t,p)=>{const f=c("a-button"),$=c("a-divider"),R=c("icon"),q=c("a-menu-item"),z=c("a-menu"),X=c("a-dropdown");return v(),E(k,null,[a(r(Z),{onRegister:r(g),rowSelection:r(M)},{tableTitle:i(()=>[a(f,{type:"primary",preIcon:"ant-design:plus-outlined",onClick:N},{default:i(()=>[_e("\u6DFB\u52A0\u90E8\u95E8\u89D2\u8272")]),_:1}),r(b).length>0?(v(),E(k,{key:0},[a($,{type:"vertical"}),a(X,null,{overlay:i(()=>[a(z,null,{default:i(()=>[a(q,{key:"1",onClick:K},{default:i(()=>[a(R,{icon:"ant-design:delete-outlined"}),be]),_:1})]),_:1})]),default:i(()=>[a(f,null,{default:i(()=>[we,a(R,{icon:"akar-icons:chevron-down"})]),_:1})]),_:1})],64)):ge("",!0)]),action:i(({record:h})=>[a(r(ee),{actions:U(h),dropDownActions:W(h)},null,8,["actions","dropDownActions"])]),_:1},8,["onRegister","rowSelection"]),a(ne,{departId:r(e),onRegister:r(S),onSuccess:O},null,8,["departId","onRegister"]),a(ae,{onRegister:r(I)},null,8,["onRegister"])],64)}}});export{Me as _};
