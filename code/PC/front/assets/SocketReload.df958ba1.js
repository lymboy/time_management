import{j as b,C as l,e8 as e,Z as B,r as d,s as E,Q as x,w as D,aW as m,v as k,u as C}from"./index.d13d32e3.js";const S={style:{"margin-bottom":"8px"}},R=m("span",null,"\u542F\u7528\u6570\u636E\u53D8\u52A8\u7279\u6548\uFF1A",-1),N=b({__name:"SocketReload",setup(V){const{createMessage:r}=C(),p=l(),c=l(!0),i=l(!1),f=l([]),w=l([{key:"num",title:"\u5E8F\u53F7",width:80},{key:"enabled",title:"\u542F\u7528",width:80,type:e.checkbox},{key:"ship_name",title:"\u8239\u540D",width:180,type:e.input},{key:"call",title:"\u547C\u53EB",width:80,type:e.input},{key:"len",title:"\u957F",width:80,type:e.input},{key:"ton",title:"\u5428",width:120,type:e.input},{key:"payer",title:"\u4ED8\u6B3E\u65B9",width:120,type:e.input},{key:"count",title:"\u6570",width:40},{key:"company",title:"\u516C\u53F8",minWidth:180,type:e.input},{key:"trend",title:"\u52A8\u5411",width:120,type:e.input}]);_();function _(){i.value=!0,B.get({url:"/mock/vxe/getData",params:{pageNo:1,pageSize:200}}).then(t=>{f.value=t.records}).finally(()=>{i.value=!1})}function g(t){switch(t.type){case e.radio:case e.checkbox:h(t);break}}function v(t){h(t)}function h(t){let{$table:a,row:o,column:u}=t,n=u.property;a.isUpdateByRow(o,n)&&a.validate(o).then(s=>{if(!s){let F=r.loading(`\u6B63\u5728\u4FDD\u5B58"${u.title}"`,0);setTimeout(()=>{var y;F(),r.success(`"${u.title}"\u4FDD\u5B58\u6210\u529F\uFF01`),a.reloadRow(o,null,n),(y=p.value)==null||y.socketSendUpdateRow(o)},555)}})}return(t,a)=>{const o=d("a-switch"),u=d("JVxeTable"),n=d("a-card");return E(),x(n,{title:"\u65E0\u75D5\u5237\u65B0\u793A\u4F8B",bordered:!1},{default:D(()=>[m("div",S,[R,k(o,{checked:c.value,"onUpdate:checked":a[0]||(a[0]=s=>c.value=s)},null,8,["checked"])]),k(u,{ref_key:"tableRef",ref:p,rowNumber:"",rowSelection:"",keepSource:"",socketReload:"",socketKey:"demo-socket-reload",reloadEffect:c.value,height:340,loading:i.value,columns:w.value,dataSource:f.value,onValueChange:g,onEditClosed:v},null,8,["reloadEffect","loading","columns","dataSource"])]),_:1})}}});export{N as default};
