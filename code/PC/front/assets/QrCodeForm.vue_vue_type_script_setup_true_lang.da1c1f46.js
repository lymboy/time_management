import{_ as w}from"./LoginFormTitle.vue_vue_type_script_setup_true_lang.03e93f14.js";import{j as y,C as f,cM as I,ew as Q,m as g,E as L,K as t,s as T,t as B,v as n,aW as q,w as _,y as v,z as C,b7 as D,cH as E,ax as N,R as V,o as b,eD as j,eK as z,eL as F}from"./index.d13d32e3.js";import{Q as K}from"./index.351c3e5f.js";const R={class:"enter-x min-w-64 min-h-64"},W=y({__name:"QrCodeForm",setup(U){const r=f("");let s;const{t:a}=b(),k=I(),{handleBackLogin:p,getLoginState:x}=Q(),o=f("0"),i=g(()=>t(x)===j.QR_CODE),h=g(()=>t(o)==="0"?a("sys.login.scanSign"):a("sys.login.scanSuccess"));function l(){o.value="0",z().then(e=>{r.value=e.qrcodeId,e.qrcodeId&&S(e.qrcodeId)})}function u(e){F({qrcodeId:e}).then(c=>{let m=c.token;m=="-2"&&(l(),clearInterval(s)),c.success&&(o.value="2",clearInterval(s),setTimeout(()=>{k.qrCodeLogin(m)},500))})}function S(e){u(e),d(),s=setInterval(()=>{u(e)},1500)}function d(){s&&clearInterval(s)}return L(i,e=>{e?l():d()}),(e,c)=>t(i)?(T(),B(N,{key:0},[n(w,{class:"enter-x"}),q("div",R,[n(t(K),{value:r.value,class:"enter-x flex justify-center xl:justify-start",width:280},null,8,["value"]),n(t(D),{class:"enter-x"},{default:_(()=>[v(C(t(h)),1)]),_:1}),n(t(E),{size:"large",block:"",class:"mt-4 enter-x",onClick:t(p)},{default:_(()=>[v(C(t(a)("sys.login.backSignIn")),1)]),_:1},8,["onClick"])])],64)):V("",!0)}});export{W as _};
