var F=(t,u,n)=>new Promise((M,p)=>{var g=e=>{try{a(n.next(e))}catch(c){p(c)}},s=e=>{try{a(n.throw(e))}catch(c){p(c)}},a=e=>e.done?M(e.value):Promise.resolve(e.value).then(g,s);a((n=n.apply(t,u)).next())});import{B as j}from"./index.1c9272fa.js";import{s as A}from"./jvxetable.api.5fa182b2.js";import{o as y,a as w}from"./api.39b3477f.js";import{j as T,C,a8 as b,bH as E,m as U,K as k,q as Y,r as d,s as R,Q as H,w as r,v as o,y as L,x as $}from"./index.d13d32e3.js";import"./BasicModal.d291574e.js";import"./useWindowSizeFn.67dc54bf.js";const h=T({name:"OneToOneModal",components:{BasicModal:j},emits:["success","register"],setup(t,{emit:u}){const n=C(!0),M=C(""),p=C(),g=b({xs:{span:24},sm:{span:5}}),s=b({xs:{span:24},sm:{span:16}}),a={orderCode:[{required:!0,message:"\u8BA2\u5355\u53F7\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]},e=b({id:null,orderCode:"",orderMoney:"",ctype:"",content:"",jeecgOrderCustomerList:{name:"",telphone:""},jeecgOrderTicketList:{ticketCode:"",tickectDate:""}}),[c,{setModalProps:f,closeModal:v}]=E(i=>F(this,null,function*(){if(f({confirmLoading:!1}),_(),n.value=!!(i!=null&&i.isUpdate),k(n)){M.value=i.record.id,Object.assign(e,i.record);let B={id:e.id};const l=yield y(B);e.jeecgOrderCustomerList=l[0]?l[0]:{};const D=yield w(B);e.jeecgOrderTicketList=D[0]?D[0]:{}}})),m=U(()=>k(n)?"\u7F16\u8F91":"\u65B0\u589E");function _(){e.id=null,e.orderCode="",e.orderMoney="",e.orderDate=null,e.ctype="",e.content="",e.jeecgOrderCustomerList={},e.jeecgOrderTicketList={}}function O(){return F(this,null,function*(){p.value.validate().then(()=>F(this,null,function*(){try{console.log("formData",JSON.stringify(e)),f({confirmLoading:!0}),e.jeecgOrderCustomerList=Object.keys(e.jeecgOrderCustomerList).length>0?[e.jeecgOrderCustomerList]:[],e.jeecgOrderTicketList=Object.keys(e.jeecgOrderTicketList).length>0?[e.jeecgOrderTicketList]:[],yield A(e,k(n)),v(),u("success")}finally{f({confirmLoading:!1})}})).catch(i=>{console.log("error",i)})})}return{formRef:p,validatorRules:a,orderMainModel:e,registerModal:c,getTitle:m,labelCol:g,wrapperCol:s,handleSubmit:O}}});function I(t,u,n,M,p,g){const s=d("a-input"),a=d("a-form-item"),e=d("a-col"),c=d("a-select-option"),f=d("a-select"),v=d("a-date-picker"),m=d("a-row"),_=d("a-tab-pane"),O=d("a-tabs"),i=d("a-form"),B=d("BasicModal");return R(),H(B,$(t.$attrs,{onRegister:t.registerModal,title:t.getTitle,onOk:t.handleSubmit,width:"70%"}),{default:r(()=>[o(i,{ref:"formRef",model:t.orderMainModel,"label-col":t.labelCol,"wrapper-col":t.wrapperCol,rules:t.validatorRules},{default:r(()=>[o(m,{class:"form-row",gutter:16},{default:r(()=>[o(e,{lg:8},{default:r(()=>[o(a,{label:"\u8BA2\u5355\u53F7",name:"orderCode"},{default:r(()=>[o(s,{value:t.orderMainModel.orderCode,"onUpdate:value":u[0]||(u[0]=l=>t.orderMainModel.orderCode=l),placeholder:"\u8BF7\u8F93\u5165\u8BA2\u5355\u53F7"},null,8,["value"])]),_:1})]),_:1}),o(e,{lg:8},{default:r(()=>[o(a,{label:"\u8BA2\u5355\u7C7B\u578B"},{default:r(()=>[o(f,{placeholder:"\u8BF7\u9009\u62E9\u8BA2\u5355\u7C7B\u578B",value:t.orderMainModel.ctype,"onUpdate:value":u[1]||(u[1]=l=>t.orderMainModel.ctype=l)},{default:r(()=>[o(c,{value:"1"},{default:r(()=>[L("\u56FD\u5185\u8BA2\u5355")]),_:1}),o(c,{value:"2"},{default:r(()=>[L("\u56FD\u9645\u8BA2\u5355")]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),o(e,{lg:8},{default:r(()=>[o(a,{label:"\u8BA2\u5355\u65E5\u671F"},{default:r(()=>[o(v,{showTime:"",valueFormat:"YYYY-MM-DD HH:mm:ss",value:t.orderMainModel.orderDate,"onUpdate:value":u[2]||(u[2]=l=>t.orderMainModel.orderDate=l)},null,8,["value"])]),_:1})]),_:1})]),_:1}),o(m,{class:"form-row",gutter:16},{default:r(()=>[o(e,{lg:8},{default:r(()=>[o(a,{label:"\u8BA2\u5355\u91D1\u989D"},{default:r(()=>[o(s,{value:t.orderMainModel.orderMoney,"onUpdate:value":u[3]||(u[3]=l=>t.orderMainModel.orderMoney=l),placeholder:"\u8BF7\u8F93\u5165\u8BA2\u5355\u91D1\u989D"},null,8,["value"])]),_:1})]),_:1}),o(e,{lg:8},{default:r(()=>[o(a,{label:"\u8BA2\u5355\u5907\u6CE8"},{default:r(()=>[o(s,{value:t.orderMainModel.content,"onUpdate:value":u[4]||(u[4]=l=>t.orderMainModel.content=l),placeholder:"\u8BF7\u8F93\u5165\u8BA2\u5355\u5907\u6CE8"},null,8,["value"])]),_:1})]),_:1})]),_:1}),o(O,{defaultActiveKey:"1"},{default:r(()=>[o(_,{tab:"\u5BA2\u6237\u4FE1\u606F",key:"1"},{default:r(()=>[o(m,{class:"form-row",gutter:16},{default:r(()=>[o(e,{lg:8},{default:r(()=>[o(a,{label:"\u5BA2\u6237\u59D3\u540D"},{default:r(()=>[o(s,{value:t.orderMainModel.jeecgOrderCustomerList.name,"onUpdate:value":u[5]||(u[5]=l=>t.orderMainModel.jeecgOrderCustomerList.name=l),placeholder:"\u8BF7\u8F93\u5165\u5BA2\u6237\u59D3\u540D"},null,8,["value"])]),_:1})]),_:1}),o(e,{lg:8},{default:r(()=>[o(a,{label:"\u624B\u673A\u53F7"},{default:r(()=>[o(s,{value:t.orderMainModel.jeecgOrderCustomerList.telphone,"onUpdate:value":u[6]||(u[6]=l=>t.orderMainModel.jeecgOrderCustomerList.telphone=l),placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7"},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1}),o(_,{tab:"\u673A\u7968\u4FE1\u606F",key:"2",forceRender:""},{default:r(()=>[o(m,{class:"form-row",gutter:16},{default:r(()=>[o(e,{lg:8},{default:r(()=>[o(a,{label:"\u822A\u73ED\u53F7"},{default:r(()=>[o(s,{value:t.orderMainModel.jeecgOrderTicketList.ticketCode,"onUpdate:value":u[7]||(u[7]=l=>t.orderMainModel.jeecgOrderTicketList.ticketCode=l),placeholder:"\u8BF7\u8F93\u5165\u822A\u73ED\u53F7"},null,8,["value"])]),_:1})]),_:1}),o(e,{lg:8},{default:r(()=>[o(a,{label:"\u8D77\u98DE\u65F6\u95F4"},{default:r(()=>[o(v,{showTime:"",valueFormat:"YYYY-MM-DD HH:mm:ss",value:t.orderMainModel.jeecgOrderTicketList.tickectDate,"onUpdate:value":u[8]||(u[8]=l=>t.orderMainModel.jeecgOrderTicketList.tickectDate=l)},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model","label-col","wrapper-col","rules"])]),_:1},16,["onRegister","title","onOk"])}const Q=Y(h,[["render",I],["__scopeId","data-v-bcee91dc"]]);export{Q as default};
