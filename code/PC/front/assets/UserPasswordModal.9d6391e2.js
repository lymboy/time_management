var x=Object.defineProperty,z=Object.defineProperties;var A=Object.getOwnPropertyDescriptors;var h=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var y=(e,a,s)=>a in e?x(e,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[a]=s,M=(e,a)=>{for(var s in a||(a={}))I.call(a,s)&&y(e,s,a[s]);if(h)for(var s of h(a))R.call(a,s)&&y(e,s,a[s]);return e},k=(e,a)=>z(e,A(a));var F=(e,a,s)=>new Promise((p,l)=>{var r=o=>{try{d(s.next(o))}catch(c){l(c)}},f=o=>{try{d(s.throw(o))}catch(c){l(c)}},d=o=>o.done?p(o.value):Promise.resolve(o.value).then(r,f);d((s=s.apply(e,a)).next())});import{B as q}from"./index.1c9272fa.js";import{b as L}from"./UserSetting.api.47c39ec8.js";import{j as D,C as P,a8 as $,bH as j,cM as N,r as w,s as V,Q as H,w as m,v as i,aW as n,x as K,K as v,dm as O,dn as Q,u as T,q as W}from"./index.d13d32e3.js";import"./BasicModal.d291574e.js";import"./useWindowSizeFn.67dc54bf.js";const _=e=>(O("data-v-76cc3cd6"),e=e(),Q(),e),Z=_(()=>n("div",{class:"black font-size-13"},"\u539F\u6709\u5BC6\u7801",-1)),G={class:"pass-padding"},J=_(()=>n("div",{style:{display:"block"}},[n("span",{class:"gray-9e float-left font-size-13"},"\u8FDB\u5165\u7F51\u7AD9\u7684\u767B\u5F55\u5BC6\u7801")],-1)),X=_(()=>n("span",{class:"black font-size-13"},"\u65B0\u5BC6\u7801",-1)),Y={class:"pass-padding"},ss=_(()=>n("span",{class:"gray-9e font-size-13"},"8-20\u4F4D\uFF0C\u9700\u5305\u542B\u5B57\u6BCD\u548C\u6570\u5B57",-1)),es=D({name:"user-pass-word-modal"}),as=D(k(M({},es),{emits:["success","register"],setup(e,{emit:a}){const s=T(),p=P(""),l=P(),r=$({oldpassword:"",password:""}),[f,{setModalProps:d,closeModal:o}]=j(u=>F(this,null,function*(){d({confirmLoading:!1}),p.value=u.record.username})),c=N(),S={password:[{required:!0,validator:E},{pattern:/^(?=.*[0-9])(?=.*[a-zA-Z])(.{8,20})$/,message:"8-20\u4F4D\uFF0C\u9700\u5305\u542B\u5B57\u6BCD\u548C\u6570\u5B57"}],oldpassword:[{required:!0,message:"\u8BF7\u8F93\u5165\u539F\u6709\u5BC6\u7801"}]};function b(){return F(this,null,function*(){try{let u=yield l.value.validateFields();d({confirmLoading:!0}),u.username=v(p),u.confirmpassword=u.password,yield L(u).then(t=>{t.success?(s.createMessage.info({content:"\u5BC6\u7801\u4FEE\u6539\u6210\u529F\uFF0C\u8BF7\u91CD\u65B0\u767B\u5F55\uFF013s\u540E\u81EA\u52A8\u9000\u51FA\u767B\u5F55",duration:3}),setTimeout(()=>{c.logout(!0)},3e3),o()):s.createMessage.warn(t.message)})}finally{d({confirmLoading:!1})}})}function E(u,t){return t===""?Promise.reject("\u8BF7\u8F93\u5165\u65B0\u5BC6\u7801"):Promise.resolve()}return(u,t)=>{const g=w("a-input-password"),C=w("a-form-item"),U=w("a-form");return V(),H(v(q),K(u.$attrs,{onRegister:v(f),title:"\u4FEE\u6539\u5BC6\u7801",onOk:b}),{default:m(()=>[i(U,{class:"antd-modal-form",ref_key:"formRef",ref:l,model:r,rules:S},{default:m(()=>[i(C,{name:"oldpassword"},{default:m(()=>[Z,n("div",G,[i(g,{value:r.oldpassword,"onUpdate:value":t[0]||(t[0]=B=>r.oldpassword=B),placeholder:"\u539F\u6709\u5BC6\u7801"},null,8,["value"])]),J]),_:1}),i(C,{name:"password"},{default:m(()=>[X,n("div",Y,[i(g,{value:r.password,"onUpdate:value":t[1]||(t[1]=B=>r.password=B),placeholder:"\u65B0\u5BC6\u7801"},null,8,["value"])]),ss]),_:1})]),_:1},8,["model"])]),_:1},16,["onRegister"])}}}));const ls=W(as,[["__scopeId","data-v-76cc3cd6"]]);export{ls as default};
