var v=Object.defineProperty;var h=Object.getOwnPropertySymbols;var w=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;var y=(t,s,e)=>s in t?v(t,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[s]=e,B=(t,s)=>{for(var e in s||(s={}))w.call(s,e)&&y(t,e,s[e]);if(h)for(var e of h(s))M.call(s,e)&&y(t,e,s[e]);return t};var f=(t,s,e)=>new Promise((c,u)=>{var p=n=>{try{r(e.next(n))}catch(a){u(a)}},d=n=>{try{r(e.throw(n))}catch(a){u(a)}},r=n=>n.done?c(n.value):Promise.resolve(n.value).then(p,d);r((e=e.apply(t,s)).next())});import{B as S}from"./index.1c9272fa.js";import{B as _}from"./BasicForm.e6ef05c4.js";import"./componentMap.6f8f51f6.js";import{u as C}from"./useForm.1a92e1aa.js";import"./JAddInput.ec01e271.js";import{j as k,cM as A,C as g,bH as E,s as I,Q as T,w as x,v as R,K as i,x as L,u as Y}from"./index.d13d32e3.js";import{a as O}from"./UserSetting.api.47c39ec8.js";const Q=[{key:"1",name:"\u4E2A\u4EBA\u4FE1\u606F",component:"BaseSetting",icon:"ant-design:user-outlined"},{key:"2",name:"\u6211\u7684\u79DF\u6237",component:"TenantSetting",icon:"ant-design:team-outlined"},{key:"3",name:"\u8D26\u53F7\u5B89\u5168",component:"AccountSetting",icon:"ant-design:lock-outlined"},{key:"4",name:"\u7B2C\u4E09\u65B9APP",component:"WeChatDingSetting",icon:"ant-design:contacts-outlined"}],U=[{field:"realname",component:"Input",label:"\u59D3\u540D",colProps:{span:24},required:!0},{field:"birthday",component:"DatePicker",label:"\u751F\u65E5",colProps:{span:24},componentProps:{showTime:!1,valueFormat:"YYYY-MM-DD",getPopupContainer:()=>document.body}},{field:"sex",component:"RadioGroup",label:"\u6027\u522B",colProps:{span:24},componentProps:{options:[{label:"\u7537",value:1},{label:"\u5973",value:2}]}},{field:"relTenantIds",component:"JDictSelectTag",label:"\u79DF\u6237",colProps:{span:24},componentProps:{mode:"multiple",dictCode:"sys_tenant,name,id",disabled:!0}},{field:"post",component:"JDictSelectTag",label:"\u804C\u4F4D",colProps:{span:24},componentProps:{mode:"multiple",dictCode:"sys_position,name,code",disabled:!0}},{label:"",field:"id",component:"Input",show:!1}],W=k({__name:"UserAccountModal",emits:["register","success"],setup(t,{emit:s}){const e=A(),{createMessage:c}=Y(),[u,{resetFields:p,setFieldsValue:d,validate:r,updateSchema:n}]=C({schemas:U,showActionButtonGroup:!1}),a=g({});g(!1);const b=g(""),[F,{setModalProps:m,closeModal:P}]=E(o=>f(this,null,function*(){yield p(),m({confirmLoading:!1}),b.value="\u7F16\u8F91\u4E2A\u4EBA\u8D44\u6599",o.record.post&&(o.record.post=o.record.post.split(",")),o.record.relTenantIds&&(o.record.relTenantIds=o.record.relTenantIds.split(",")),a.value=o.record,o.record.birthday==="\u672A\u586B\u5199"&&(o.record.birthday=void 0),yield d(B({},o.record))}));function D(){return f(this,null,function*(){try{let o=yield r();m({confirmLoading:!0}),yield O(o).then(l=>{l.success?c.success(l.message):c.warn(l.message)}),Object.assign(a.value,o),e.setUserInfo(i(a)),s("success"),P()}finally{m({confirmLoading:!1})}})}return(o,l)=>(I(),T(i(S),L(o.$attrs,{onRegister:i(F),width:"500px",title:b.value,onOk:D,destroyOnClose:""}),{default:x(()=>[R(i(_),{onRegister:i(u)},null,8,["onRegister"])]),_:1},16,["onRegister","title"]))}});export{W as _,Q as s};
