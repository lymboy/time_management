var T=Object.defineProperty;var C=Object.getOwnPropertySymbols;var k=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;var w=(o,t,e)=>t in o?T(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e,m=(o,t)=>{for(var e in t||(t={}))k.call(t,e)&&w(o,e,t[e]);if(C)for(var e of C(t))P.call(t,e)&&w(o,e,t[e]);return o};var i=(o,t,e)=>new Promise((c,l)=>{var n=s=>{try{r(e.next(s))}catch(u){l(u)}},p=s=>{try{r(e.throw(s))}catch(u){l(u)}},r=s=>s.done?c(s.value):Promise.resolve(s.value).then(n,p);r((e=e.apply(o,t)).next())});import{B as S}from"./BasicForm.e6ef05c4.js";import"./componentMap.6f8f51f6.js";import{u as V}from"./useForm.1a92e1aa.js";import"./JAddInput.ec01e271.js";import{j as N,bj as R,C as f,m as A,X as E,E as _,K as b,r as F,s as U,Q as G,w as y,v as g,aW as j,y as D}from"./index.d13d32e3.js";import{b as K}from"./depart.api.0bd5897e.js";import{u as M,o as x}from"./depart.data.ff6c9320.js";const Q={class:"j-box-bottom-button offset-20",style:{"margin-top":"30px"}},W={class:"j-box-bottom-button-float"},ee=N({__name:"DepartFormTab",props:{data:{type:Object,default:()=>({})},rootTreeData:{type:Array,default:()=>[]}},emits:["success"],setup(o,{emit:t}){const e=o;R("prefixCls");const c=f(!1),l=f(!0),n=f({}),[p,{resetFields:r,setFieldsValue:s,validate:u,updateSchema:d}]=V({schemas:M().basicFormSchema,showActionButtonGroup:!1}),v=A(()=>{var a;return(a=e==null?void 0:e.data)!=null&&a.parentId?x.child:x.root});E(()=>{d([{field:"parentId",componentProps:{disabled:!0}},{field:"orgCode",componentProps:{disabled:!0}}]),_(()=>e.data,()=>i(this,null,function*(){let a=b(e.data);typeof a!="object"&&(a={}),n.value=a,yield r(),yield s(m({},a))}),{deep:!0,immediate:!0}),_(()=>e.rootTreeData,()=>i(this,null,function*(){d([{field:"parentId",componentProps:{treeData:e.rootTreeData}}])}),{deep:!0,immediate:!0}),_(v,()=>i(this,null,function*(){d([{field:"orgCategory",componentProps:{options:v.value}}])}),{immediate:!0})});function B(){return i(this,null,function*(){yield r(),yield s(m({},n.value))})}function O(){return i(this,null,function*(){try{c.value=!0;let a=yield u();a=Object.assign({},n.value,a),yield K(a,l.value),t("success"),Object.assign(n.value,a)}finally{c.value=!1}})}return(a,X)=>{const h=F("a-button"),I=F("a-spin");return U(),G(I,{spinning:c.value},{default:y(()=>[g(b(S),{onRegister:b(p)},null,8,["onRegister"]),j("div",Q,[j("div",W,[g(h,{preIcon:"ant-design:sync-outlined",onClick:B},{default:y(()=>[D("\u91CD\u7F6E")]),_:1}),g(h,{type:"primary",preIcon:"ant-design:save-filled",onClick:O},{default:y(()=>[D("\u4FDD\u5B58")]),_:1})])])]),_:1},8,["spinning"])}}});export{ee as _};
