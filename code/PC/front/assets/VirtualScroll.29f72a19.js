import{j as E,C as A,a8 as D,m as c,K as i,E as I,X as B,G as M,am as k,v as o,bh as L,q as V,W as P,b7 as q,r as S,s as j,Q as z,w as _,y as F,aW as g,z as C}from"./index.d13d32e3.js";import{a as G}from"./index.9013d2b9.js";import"./useContentHeight.729fdab1.js";import"./onMountedOrActivated.a5139741.js";import"./useWindowSizeFn.67dc54bf.js";import"./useContentViewHeight.c21fb651.js";import"./usePageContext.a7636151.js";const K={height:[Number,String],maxHeight:[Number,String],maxWidth:[Number,String],minHeight:[Number,String],minWidth:[Number,String],width:[Number,String],bench:{type:[Number,String],default:0},itemHeight:{type:[Number,String],required:!0},items:{type:Array,default:()=>[]}},w="virtual-scroll";function a(t,s="px"){if(!(t==null||t===""))return isNaN(+t)?String(t):`${Number(t)}${s}`}const Q=E({name:"VirtualScroll",props:K,setup(t,{slots:s}){const u=A(null),r=D({first:0,last:0,scrollTop:0}),p=c(()=>parseInt(t.bench,10)),m=c(()=>parseInt(t.itemHeight,10)),h=c(()=>Math.max(0,r.first-i(p))),f=c(()=>Math.min((t.items||[]).length,r.last+i(p))),v=c(()=>({height:a((t.items||[]).length*i(m))})),d=c(()=>{const e={},n=a(t.height),l=a(t.minHeight),x=a(t.minWidth),H=a(t.maxHeight),N=a(t.maxWidth),W=a(t.width);return n&&(e.height=n),l&&(e.minHeight=l),x&&(e.minWidth=x),H&&(e.maxHeight=H),N&&(e.maxWidth=N),W&&(e.width=W),e});I([()=>t.itemHeight,()=>t.height],()=>{b()});function y(e){const n=i(u);if(!n)return 0;const l=parseInt(t.height||0,10)||n.clientHeight;return e+Math.ceil(l/i(m))}function R(){return Math.floor(r.scrollTop/i(m))}function b(){const e=i(u);!e||(r.scrollTop=e.scrollTop,r.first=R(),r.last=y(r.first))}function T(){const{items:e=[]}=t;return e.slice(i(h),i(f)).map($)}function $(e,n){n+=i(h);const l=a(n*i(m));return o("div",{class:`${w}__item`,style:{top:l},key:n},[L(s,"default",{index:n,item:e})])}return B(()=>{r.last=y(0),M(()=>{const e=i(u);!e||k({el:e,name:"scroll",listener:b,wait:0})})}),()=>o("div",{class:w,style:i(d),ref:u},[o("div",{class:`${w}__container`,style:i(v)},[T()])])}});const U=V(Q,[["__scopeId","data-v-f9d5e69c"]]),X=P(U),J=(()=>{const t=[];for(let s=1;s<2e4;s++)t.push({title:"\u5217\u8868\u9879"+s});return t})(),O=E({components:{VScroll:X,Divider:q,PageWrapper:G},setup(){return{data:J}}});const Y={class:"virtual-scroll-demo-wrap"},Z={class:"virtual-scroll-demo__item"},tt={class:"virtual-scroll-demo-wrap"},et={class:"virtual-scroll-demo__item"};function it(t,s,u,r,p,m){const h=S("Divider"),f=S("VScroll"),v=S("PageWrapper");return j(),z(v,{class:"virtual-scroll-demo"},{default:_(()=>[o(h,null,{default:_(()=>[F("\u57FA\u7840\u6EDA\u52A8\u793A\u4F8B")]),_:1}),g("div",Y,[o(f,{itemHeight:41,items:t.data,height:300,width:300},{default:_(({item:d})=>[g("div",Z,C(d.title),1)]),_:1},8,["items"])]),o(h,null,{default:_(()=>[F("\u5373\u4F7F\u4E0D\u53EF\u89C1\uFF0C\u4E5F\u9884\u5148\u52A0\u8F7D50\u6761\u6570\u636E\uFF0C\u9632\u6B62\u7A7A\u767D")]),_:1}),g("div",tt,[o(f,{itemHeight:41,items:t.data,height:300,width:300,bench:50},{default:_(({item:d})=>[g("div",et,C(d.title),1)]),_:1},8,["items"])])]),_:1})}const ut=V(O,[["render",it],["__scopeId","data-v-7316c0b2"]]);export{ut as default};
