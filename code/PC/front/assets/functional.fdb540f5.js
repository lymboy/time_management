import{cb as it,cc as ot,C as x,a8 as me,_ as c,X as Se,cd as $e,bl as Ue,ce as lt,bo as B,bB as ut,bj as st,m as v,j as ne,bq as Ie,cf as Fe,cg as fe,E as te,aa as We,ch as ct,v as o,ax as Ze,ci as vt,cj as ue,ck as oe,ag as Xe,cl as ft,cm as mt,cn as Ye,co as Ne,cp as dt,cq as gt,av as we,aJ as Be,az as He,aA as qe,bn as Je,d as pt,cr as De,cs as wt,aN as ht,l as Ct,aP as Pt,K as le,y as bt,ct as yt,cu as Ot}from"./index.d13d32e3.js";var xt="[object Number]";function St(n){return typeof n=="number"||it(n)&&ot(n)==xt}function It(n){var e=x(null),a=me(c({},n)),i=x([]),t=function(p){e.value===null&&(i.value=[],e.value=$e(function(){var w;i.value.forEach(function(_){w=c(c({},w),_)}),Ue(a,w),e.value=null})),i.value.push(p)};return Se(function(){e.value&&$e.cancel(e.value)}),[a,t]}function je(n,e,a,i){var t=e+a,l=(a-i)/2;if(a>i){if(e>0)return B({},n,l);if(e<0&&t<i)return B({},n,-l)}else if(e<0||t>i)return B({},n,e<0?l:-l);return{}}function Mt(n,e,a,i){var t=lt(),l=t.width,p=t.height,w=null;return n<=l&&e<=p?w={x:0,y:0}:(n>l||e>p)&&(w=c(c({},je("x",a,n,l)),je("y",i,e,p))),w}var ze=Symbol("previewGroupContext"),Me={provide:function(e){ut(ze,e)},inject:function(){return st(ze,{isPreviewGroup:x(!1),previewUrls:v(function(){return new Map}),setPreviewUrls:function(){},current:x(null),setCurrent:function(){},setShowPreview:function(){},setMousePosition:function(){},registerImage:null,rootClassName:""})}},_t=ne({compatConfig:{MODE:3},name:"PreviewGroup",inheritAttrs:!1,props:{previewPrefixCls:String,preview:{type:[Boolean,Object],default:!0},icons:{type:Object,default:function(){return{}}}},setup:function(e,a){var i=a.slots,t=v(function(){var d={visible:void 0,onVisibleChange:function(){},getContainer:void 0,current:0};return Ie(e.preview)==="object"?tt(e.preview,d):d}),l=me(new Map),p=x(),w=v(function(){return t.value.visible}),_=v(function(){return t.value.getContainer}),W=function(f,L){var b,y;(b=(y=t.value).onVisibleChange)===null||b===void 0||b.call(y,f,L)},h=Fe(!!w.value,{value:w,onChange:W}),O=fe(h,2),R=O[0],g=O[1],k=x(null),Z=v(function(){return w.value!==void 0}),V=v(function(){return Array.from(l.keys())}),S=v(function(){return V.value[t.value.current]}),P=v(function(){return new Map(Array.from(l).filter(function(d){var f=fe(d,2),L=f[1].canPreview;return!!L}).map(function(d){var f=fe(d,2),L=f[0],b=f[1].url;return[L,b]}))}),E=function(f,L){var b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;l.set(f,{url:L,canPreview:b})},$=function(f){p.value=f},I=function(f){k.value=f},N=function(f,L){var b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,y=function(){l.delete(f)};return l.set(f,{url:L,canPreview:b}),y},T=function(f){f==null||f.stopPropagation(),g(!1),I(null)};return te(S,function(d){$(d)},{immediate:!0,flush:"post"}),We(function(){R.value&&Z.value&&$(S.value)},{flush:"post"}),Me.provide({isPreviewGroup:x(!0),previewUrls:P,setPreviewUrls:E,current:p,setCurrent:$,setShowPreview:g,setMousePosition:I,registerImage:N}),function(){var d=Ue({},(ct(t.value),t.value));return o(Ze,null,[i.default&&i.default(),o(Qe,c(c({},d),{},{"ria-hidden":!R.value,visible:R.value,prefixCls:e.previewPrefixCls,onClose:T,mousePosition:k.value,src:P.value.get(p.value),icons:e.icons,getContainer:_.value}),null)])}}});const Ke=_t;var K={x:0,y:0},Lt=c(c({},vt()),{},{src:String,alt:String,rootClassName:String,icons:{type:Object,default:function(){return{}}}}),Rt=ne({compatConfig:{MODE:3},name:"Preview",inheritAttrs:!1,props:Lt,emits:["close","afterClose"],setup:function(e,a){var i=a.emit,t=a.attrs,l=me(e.icons),p=l.rotateLeft,w=l.rotateRight,_=l.zoomIn,W=l.zoomOut,h=l.close,O=l.left,R=l.right,g=x(1),k=x(0),Z=It(K),V=fe(Z,2),S=V[0],P=V[1],E=function(){return i("close")},$=x(),I=me({originX:0,originY:0,deltaX:0,deltaY:0}),N=x(!1),T=Me.inject(),d=T.previewUrls,f=T.current,L=T.isPreviewGroup,b=T.setCurrent,y=v(function(){return d.value.size}),r=v(function(){return Array.from(d.value.keys())}),u=v(function(){return r.value.indexOf(f.value)}),D=v(function(){return L.value?d.value.get(f.value):e.src}),j=v(function(){return L.value&&y.value>1}),z=x({wheelDirection:0}),re=function(){g.value=1,k.value=0,P(K),i("afterClose")},se=function(){g.value++,P(K)},C=function(){g.value>1&&g.value--,P(K)},M=function(){k.value+=90},U=function(){k.value-=90},F=function(s){s.preventDefault(),s.stopPropagation(),u.value>0&&b(r.value[u.value-1])},X=function(s){s.preventDefault(),s.stopPropagation(),u.value<y.value-1&&b(r.value[u.value+1])},he=ue(B({},"".concat(e.prefixCls,"-moving"),N.value)),de="".concat(e.prefixCls,"-operations-operation"),Ce="".concat(e.prefixCls,"-operations-icon"),ge=[{icon:h,onClick:E,type:"close"},{icon:_,onClick:se,type:"zoomIn"},{icon:W,onClick:C,type:"zoomOut",disabled:v(function(){return g.value===1})},{icon:w,onClick:M,type:"rotateRight"},{icon:p,onClick:U,type:"rotateLeft"}],pe=function(){if(e.visible&&N.value){var s=$.value.offsetWidth*g.value,Y=$.value.offsetHeight*g.value,q=Ye($.value),G=q.left,J=q.top,H=k.value%180!==0;N.value=!1;var ae=Mt(H?Y:s,H?s:Y,G,J);ae&&P(c({},ae))}},Pe=function(s){s.button===0&&(s.preventDefault(),s.stopPropagation(),I.deltaX=s.pageX-S.x,I.deltaY=s.pageY-S.y,I.originX=S.x,I.originY=S.y,N.value=!0)},ce=function(s){e.visible&&N.value&&P({x:s.pageX-I.deltaX,y:s.pageY-I.deltaY})},be=function(s){if(!!e.visible){s.preventDefault();var Y=s.deltaY;z.value={wheelDirection:Y}}},ye=function(s){!e.visible||!j.value||(s.preventDefault(),s.keyCode===Ne.LEFT?u.value>0&&b(r.value[u.value-1]):s.keyCode===Ne.RIGHT&&u.value<y.value-1&&b(r.value[u.value+1]))},Oe=function(){e.visible&&(g.value!==1&&(g.value=1),(S.x!==K.x||S.y!==K.y)&&P(K))},ve=function(){};return Se(function(){te([function(){return e.visible},N],function(){ve();var m,s,Y=oe(window,"mouseup",pe,!1),q=oe(window,"mousemove",ce,!1),G=oe(window,"wheel",be,{passive:!1}),J=oe(window,"keydown",ye,!1);try{window.top!==window.self&&(m=oe(window.top,"mouseup",pe,!1),s=oe(window.top,"mousemove",ce,!1))}catch(H){}ve=function(){Y.remove(),q.remove(),G.remove(),J.remove(),m&&m.remove(),s&&s.remove()}},{flush:"post",immediate:!0}),te([z],function(){var m=z.value.wheelDirection;m>0?C():m<0&&se()})}),Xe(function(){ve()}),function(){var m=e.visible,s=e.prefixCls,Y=e.rootClassName;return o(mt,c(c({},t),{},{transitionName:"zoom",maskTransitionName:"fade",closable:!1,keyboard:!0,prefixCls:s,onClose:E,afterClose:re,visible:m,wrapClassName:he,rootClassName:Y,getContainer:e.getContainer}),{default:function(){return[o("ul",{class:"".concat(e.prefixCls,"-operations")},[ge.map(function(G){var J=G.icon,H=G.onClick,ae=G.type,ie=G.disabled;return o("li",{class:ue(de,B({},"".concat(e.prefixCls,"-operations-operation-disabled"),ie&&(ie==null?void 0:ie.value))),onClick:H,key:ae},[ft(J,{class:Ce})])})]),o("div",{class:"".concat(e.prefixCls,"-img-wrapper"),style:{transform:"translate3d(".concat(S.x,"px, ").concat(S.y,"px, 0)")}},[o("img",{onMousedown:Pe,onDblclick:Oe,ref:$,class:"".concat(e.prefixCls,"-img"),src:D.value,alt:e.alt,style:{transform:"scale3d(".concat(g.value,", ").concat(g.value,", 1) rotate(").concat(k.value,"deg)")}},null)]),j.value&&o("div",{class:ue("".concat(e.prefixCls,"-switch-left"),B({},"".concat(e.prefixCls,"-switch-left-disabled"),u.value<=0)),onClick:F},[O]),j.value&&o("div",{class:ue("".concat(e.prefixCls,"-switch-right"),B({},"".concat(e.prefixCls,"-switch-right-disabled"),u.value>=y.value-1)),onClick:X},[R])]}})}}});const Qe=Rt;var kt=["icons","maskClassName","src"],et=function(){return{src:String,wrapperClassName:String,wrapperStyle:{type:Object,default:void 0},rootClassName:String,prefixCls:String,previewPrefixCls:String,previewMask:{type:[Boolean,Function],default:void 0},placeholder:dt.any,fallback:String,preview:{type:[Boolean,Object],default:!0},onClick:{type:Function},onError:{type:Function}}},tt=function(e,a){var i=c({},e);return Object.keys(a).forEach(function(t){e[t]===void 0&&(i[t]=a[t])}),i},$t=0,nt=ne({compatConfig:{MODE:3},name:"Image",inheritAttrs:!1,props:et(),emits:["click","error"],setup:function(e,a){var i=a.attrs,t=a.slots,l=a.emit,p=v(function(){return e.prefixCls}),w=v(function(){return"".concat(p.value,"-preview")}),_=v(function(){var C={visible:void 0,onVisibleChange:function(){},getContainer:void 0};return Ie(e.preview)==="object"?tt(e.preview,C):C}),W=v(function(){return e.placeholder&&e.placeholder!==!0||t.placeholder}),h=v(function(){return _.value.visible}),O=v(function(){return _.value.getContainer}),R=v(function(){return h.value!==void 0}),g=function(M,U){var F,X;(F=(X=_.value).onVisibleChange)===null||F===void 0||F.call(X,M,U)},k=Fe(!!h.value,{value:h,onChange:g}),Z=fe(k,2),V=Z[0],S=Z[1];te(V,function(C,M){g(C,M)});var P=x(W.value?"loading":"normal");te(function(){return e.src},function(){P.value=W.value?"loading":"normal"});var E=x(null),$=v(function(){return P.value==="error"}),I=Me.inject(),N=I.isPreviewGroup,T=I.setCurrent,d=I.setShowPreview,f=I.setMousePosition,L=I.registerImage,b=x($t++),y=v(function(){return e.preview&&!$.value}),r=function(){P.value="normal"},u=function(M){P.value="error",l("error",M)},D=function(M){if(!R.value){var U=Ye(M.target),F=U.left,X=U.top;N.value?(T(b.value),f({x:F,y:X})):E.value={x:F,y:X}}N.value?d(!0):S(!0),l("click",M)},j=function(){S(!1),R.value||(E.value=null)},z=x(null);te(function(){return z},function(){P.value==="loading"&&z.value.complete&&(z.value.naturalWidth||z.value.naturalHeight)&&r()});var re=function(){};Se(function(){te([function(){return e.src},y],function(){if(re(),!N.value)return function(){};re=L(b.value,e.src,y.value),y.value||re()},{flush:"post",immediate:!0})}),Xe(function(){re()});var se=function(M){return St(M)?M+"px":M};return function(){var C=e.prefixCls,M=e.wrapperClassName,U=e.fallback,F=e.src,X=e.placeholder,he=e.wrapperStyle,de=e.rootClassName,Ce=i.width,ge=i.height,pe=i.crossorigin,Pe=i.decoding,ce=i.alt,be=i.sizes,ye=i.srcset,Oe=i.usemap,ve=i.class,m=i.style,s=_.value,Y=s.icons,q=s.maskClassName,G=s.src,J=gt(s,kt),H=ue(C,M,de,B({},"".concat(C,"-error"),$.value)),ae=$.value&&U?U:G!=null?G:F,ie={crossorigin:pe,decoding:Pe,alt:ce,sizes:be,srcset:ye,usemap:Oe,class:ue("".concat(C,"-img"),B({},"".concat(C,"-img-placeholder"),X===!0),ve),style:c({height:ge},m)};return o(Ze,null,[o("div",{class:H,onClick:y.value?D:function(at){l("click",at)},style:c({width:se(Ce),height:se(ge)},he)},[o("img",c(c(c({},ie),$.value&&U?{src:U}:{onLoad:r,onError:u,src:F}),{},{ref:z}),null),P.value==="loading"&&o("div",{"aria-hidden":"true",class:"".concat(C,"-placeholder")},[X||t.placeholder&&t.placeholder()]),t.previewMask&&y.value&&o("div",{class:["".concat(C,"-mask"),q]},[t.previewMask()])]),!N.value&&y.value&&o(Qe,c(c({},J),{},{"aria-hidden":!V.value,visible:V.value,prefixCls:w.value,onClose:j,mousePosition:E.value,src:ae,alt:ce,getContainer:O.value,icons:Y,rootClassName:de}),null)])}}});nt.PreviewGroup=Ke;const Nt=nt;var Dt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M672 418H144c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32zm-44 402H188V494h440v326z"}},{tag:"path",attrs:{d:"M819.3 328.5c-78.8-100.7-196-153.6-314.6-154.2l-.2-64c0-6.5-7.6-10.1-12.6-6.1l-128 101c-4 3.1-3.9 9.1 0 12.3L492 318.6c5.1 4 12.7.4 12.6-6.1v-63.9c12.9.1 25.9.9 38.8 2.5 42.1 5.2 82.1 18.2 119 38.7 38.1 21.2 71.2 49.7 98.4 84.3 27.1 34.7 46.7 73.7 58.1 115.8a325.95 325.95 0 016.5 140.9h74.9c14.8-103.6-11.3-213-81-302.3z"}}]},name:"rotate-left",theme:"outlined"};const jt=Dt;function Ae(n){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?Object(arguments[e]):{},i=Object.keys(a);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(a).filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable}))),i.forEach(function(t){zt(n,t,a[t])})}return n}function zt(n,e,a){return e in n?Object.defineProperty(n,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[e]=a,n}var _e=function(e,a){var i=Ae({},e,a.attrs);return o(we,Ae({},i,{icon:jt}),null)};_e.displayName="RotateLeftOutlined";_e.inheritAttrs=!1;const At=_e;var Et={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M480.5 251.2c13-1.6 25.9-2.4 38.8-2.5v63.9c0 6.5 7.5 10.1 12.6 6.1L660 217.6c4-3.2 4-9.2 0-12.3l-128-101c-5.1-4-12.6-.4-12.6 6.1l-.2 64c-118.6.5-235.8 53.4-314.6 154.2A399.75 399.75 0 00123.5 631h74.9c-.9-5.3-1.7-10.7-2.4-16.1-5.1-42.1-2.1-84.1 8.9-124.8 11.4-42.2 31-81.1 58.1-115.8 27.2-34.7 60.3-63.2 98.4-84.3 37-20.6 76.9-33.6 119.1-38.8z"}},{tag:"path",attrs:{d:"M880 418H352c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32zm-44 402H396V494h440v326z"}}]},name:"rotate-right",theme:"outlined"};const Gt=Et;function Ee(n){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?Object(arguments[e]):{},i=Object.keys(a);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(a).filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable}))),i.forEach(function(t){Vt(n,t,a[t])})}return n}function Vt(n,e,a){return e in n?Object.defineProperty(n,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[e]=a,n}var Le=function(e,a){var i=Ee({},e,a.attrs);return o(we,Ee({},i,{icon:Gt}),null)};Le.displayName="RotateRightOutlined";Le.inheritAttrs=!1;const Tt=Le;var Ut={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M637 443H519V309c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v134H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h118v134c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V519h118c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"}}]},name:"zoom-in",theme:"outlined"};const Ft=Ut;function Ge(n){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?Object(arguments[e]):{},i=Object.keys(a);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(a).filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable}))),i.forEach(function(t){Wt(n,t,a[t])})}return n}function Wt(n,e,a){return e in n?Object.defineProperty(n,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[e]=a,n}var Re=function(e,a){var i=Ge({},e,a.attrs);return o(we,Ge({},i,{icon:Ft}),null)};Re.displayName="ZoomInOutlined";Re.inheritAttrs=!1;const Zt=Re;var Xt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M637 443H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h312c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"}}]},name:"zoom-out",theme:"outlined"};const Yt=Xt;function Ve(n){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?Object(arguments[e]):{},i=Object.keys(a);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(a).filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable}))),i.forEach(function(t){Bt(n,t,a[t])})}return n}function Bt(n,e,a){return e in n?Object.defineProperty(n,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[e]=a,n}var ke=function(e,a){var i=Ve({},e,a.attrs);return o(we,Ve({},i,{icon:Yt}),null)};ke.displayName="ZoomOutOutlined";ke.inheritAttrs=!1;const Ht=ke;var rt={rotateLeft:o(At,null,null),rotateRight:o(Tt,null,null),zoomIn:o(Zt,null,null),zoomOut:o(Ht,null,null),close:o(Be,null,null),left:o(He,null,null),right:o(qe,null,null)},qt=ne({compatConfig:{MODE:3},name:"AImagePreviewGroup",inheritAttrs:!1,props:{previewPrefixCls:String},setup:function(e,a){var i=a.attrs,t=a.slots,l=Je("image",e),p=l.getPrefixCls,w=v(function(){return p("image-preview",e.previewPrefixCls)});return function(){return o(Ke,c(c({},c(c({},i),e)),{},{icons:rt,previewPrefixCls:w.value}),t)}}});const Jt=qt;var Q=ne({name:"AImage",inheritAttrs:!1,props:et(),setup:function(e,a){var i=a.slots,t=a.attrs,l=Je("image",e),p=l.prefixCls,w=l.rootPrefixCls,_=l.configProvider,W=v(function(){var h=e.preview;if(h===!1)return h;var O=Ie(h)==="object"?h:{};return c(c({icons:rt},O),{},{transitionName:De(w.value,"zoom",O.transitionName),maskTransitionName:De(w.value,"fade",O.maskTransitionName)})});return function(){var h,O=((h=_.locale)===null||h===void 0?void 0:h.Image)||pt.Image,R=function(){return o("div",{class:"".concat(p.value,"-mask-info")},[o(wt,null,null),O==null?void 0:O.preview])},g=e.previewMask,k=g===void 0?i.previewMask||R:g;return o(Nt,c(c({},c(c(c({},t),e),{},{prefixCls:p.value})),{},{preview:W.value}),c(c({},i),{},{previewMask:typeof k=="function"?k:null}))}}});Q.PreviewGroup=Jt;Q.install=function(n){return n.component(Q.name,Q),n.component(Q.PreviewGroup.name,Q.PreviewGroup),n};const Te=Q;const ln=ne({name:"ImagePreview",components:{Image:Te,PreviewGroup:Te.PreviewGroup},props:{functional:ht.bool,imageList:{type:Array}},setup(n){const{prefixCls:e}=Ct("image-preview"),a=v(()=>{const{imageList:i}=n;return i?i.map(t=>Pt(t)?{src:t,placeholder:!1}:t):[]});return{prefixCls:e,getImageList:a}}});const Kt="/assets/resume.6e209205.svg",Qt="/assets/p-rotate.1d232189.svg",en="/assets/scale.8d8ebde4.svg",tn="/assets/unscale.99ad049c.svg",nn="/assets/unrotate.f9dd5a27.svg";var ee;(function(n){n[n.LOADING=0]="LOADING",n[n.DONE=1]="DONE",n[n.FAIL=2]="FAIL"})(ee||(ee={}));const rn={show:{type:Boolean,default:!1},imageList:{type:[Array],default:null},index:{type:Number,default:0},scaleStep:{type:Number},defaultWidth:{type:Number},maskClosable:{type:Boolean},rememberState:{type:Boolean}},A="img-preview",an=ne({name:"ImagePreview",props:rn,emits:["img-load","img-error"],setup(n,{expose:e,emit:a}){const i=new Map,t=me({currentUrl:"",imgScale:1,imgRotate:0,imgTop:0,imgLeft:0,status:ee.LOADING,currentIndex:0,moveX:0,moveY:0,show:n.show}),l=x(null),p=x(null);function w(){W();const{index:r,imageList:u}=n;if(!u||!u.length)throw new Error("imageList is undefined");t.currentIndex=r,Z(u[r])}function _(){t.imgScale=1,t.imgRotate=0,t.imgTop=0,t.imgLeft=0}function W(){const r=le(l);!r||(r.onmousewheel=O,document.body.addEventListener("DOMMouseScroll",O),document.ondragstart=function(){return!1})}const h=v(()=>{var u;const r=(u=n==null?void 0:n.scaleStep)!=null?u:0;return(r!=null?r:0>0)?r/100:t.imgScale/10});function O(r){r=r||window.event,r.delta=r.wheelDelta||-r.detail,r.preventDefault(),r.delta>0&&R(h.value),r.delta<0&&R(-h.value)}function R(r){t.imgScale<=.2&&r<0||(t.imgScale+=r)}function g(r){t.imgRotate+=r}function k(){const r=le(p);!r||(r.onmousemove=null)}function Z(r){t.status=ee.LOADING;const u=new Image;u.src=r,u.onload=D=>{if(t.currentUrl!==r){const j=D.composedPath();if(n.rememberState){i.set(t.currentUrl,{scale:t.imgScale,top:t.imgTop,left:t.imgLeft,rotate:t.imgRotate});const z=i.get(r);z?(t.imgScale=z.scale,t.imgTop=z.top,t.imgRotate=z.rotate,t.imgLeft=z.left):(_(),n.defaultWidth&&(t.imgScale=n.defaultWidth/j[0].naturalWidth))}else n.defaultWidth&&(t.imgScale=n.defaultWidth/j[0].naturalWidth);j&&a("img-load",{index:t.currentIndex,dom:j[0],url:r})}t.currentUrl=r,t.status=ee.DONE},u.onerror=D=>{const j=D.composedPath();j&&a("img-error",{index:t.currentIndex,dom:j[0],url:r}),t.status=ee.FAIL}}function V(r){r&&r.stopPropagation(),S()}function S(){t.show=!1,document.body.removeEventListener("DOMMouseScroll",O),document.ondragstart=null}function P(){_()}e({resume:P,close:S,prev:E.bind(null,"left"),next:E.bind(null,"right"),setScale:r=>{r>0&&r<=10&&(t.imgScale=r)},setRotate:r=>{t.imgRotate=r}});function E(r){const{currentIndex:u}=t,{imageList:D}=n;r==="left"&&(t.currentIndex--,u<=0&&(t.currentIndex=D.length-1)),r==="right"&&(t.currentIndex++,u>=D.length-1&&(t.currentIndex=0)),Z(D[t.currentIndex])}function $(r){r=r||window.event,t.moveX=r.clientX,t.moveY=r.clientY;const u=le(p);u&&(u.onmousemove=I)}function I(r){r=r||window.event,r.preventDefault();const u=r.clientX-t.moveX,D=r.clientY-t.moveY;t.imgLeft+=u,t.imgTop+=D,t.moveX=r.clientX,t.moveY=r.clientY}const N=v(()=>{const{imgScale:r,imgRotate:u,imgTop:D,imgLeft:j}=t;return{transform:`scale(${r}) rotate(${u}deg)`,marginTop:`${D}px`,marginLeft:`${j}px`,maxWidth:n.defaultWidth?"unset":"100%"}}),T=v(()=>{const{imageList:r}=n;return r.length>1});We(()=>{n.show&&w(),n.imageList&&_()});const d=r=>{n.maskClosable&&r.target&&r.target.classList.contains(`${A}-content`)&&V(r)},f=()=>o("div",{class:`${A}__close`,onClick:V},[o(Be,{class:`${A}__close-icon`},null)]),L=()=>{if(!le(T))return null;const{currentIndex:r}=t,{imageList:u}=n;return o("div",{class:`${A}__index`},[r+1,bt(" / "),u.length])},b=()=>o("div",{class:`${A}__controller`},[o("div",{class:`${A}__controller-item`,onClick:()=>R(-h.value)},[o("img",{src:tn},null)]),o("div",{class:`${A}__controller-item`,onClick:()=>R(h.value)},[o("img",{src:en},null)]),o("div",{class:`${A}__controller-item`,onClick:P},[o("img",{src:Kt},null)]),o("div",{class:`${A}__controller-item`,onClick:()=>g(-90)},[o("img",{src:nn},null)]),o("div",{class:`${A}__controller-item`,onClick:()=>g(90)},[o("img",{src:Qt},null)])]),y=r=>le(T)?o("div",{class:[`${A}__arrow`,r],onClick:()=>E(r)},[r==="left"?o(He,null,null):o(qe,null,null)]):null;return()=>t.show&&o("div",{class:A,ref:l,onMouseup:k,onClick:d},[o("div",{class:`${A}-content`},[o("img",{style:le(N),class:[`${A}-image`,t.status===ee.DONE?"":"hidden"],ref:p,src:t.currentUrl,onMousedown:$},null),f(),L(),b(),y("left"),y("right")])])}});let xe=null;function un(n){var i;if(!yt)return;const e={},a=document.createElement("div");return Object.assign(e,{show:!0,index:0,scaleStep:100},n),xe=o(an,e),Ot(xe,a),document.body.appendChild(a),(i=xe.component)==null?void 0:i.exposed}export{Te as I,ln as _,un as c};
