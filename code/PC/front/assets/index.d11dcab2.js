var d=(t,o,e)=>new Promise((c,u)=>{var l=n=>{try{r(e.next(n))}catch(s){u(s)}},a=n=>{try{r(e.throw(n))}catch(s){u(s)}},r=n=>n.done?c(n.value):Promise.resolve(n.value).then(l,a);r((e=e.apply(t,o)).next())});import{j as m,cH as _,C as $,m as w,aa as B,o as z,K as f,aQ as h,q as C,r as i,s as y,Q as S,w as p,y as F,z as I,x as v,l as A,bx as k,bc as N,S as T,by as j,bz as D,v as P,W as b}from"./index.d13d32e3.js";import{u as O}from"./useCountdown.ea4711fe.js";import{useRuleFormItem as Q}from"./useFormItem.7e3b9788.js";const R={value:{type:[Object,Number,String,Array]},count:{type:Number,default:60},beforeStartFunc:{type:Function,default:null}},V=m({name:"CountButton",components:{Button:_},props:R,setup(t){const o=$(!1),{currentCount:e,isStart:c,start:u,reset:l}=O(t.count),{t:a}=z(),r=w(()=>f(c)?a("component.countdown.sendText",[f(e)]):a("component.countdown.normalText"));B(()=>{t.value===void 0&&l()});function n(){return d(this,null,function*(){const{beforeStartFunc:s}=t;if(s&&h(s)){o.value=!0;try{(yield s())&&u()}finally{o.value=!1}}else u()})}return{handleStart:n,currentCount:e,loading:o,getButtonText:r,isStart:c}}});function q(t,o,e,c,u,l){const a=i("Button");return y(),S(a,v(t.$attrs,{disabled:t.isStart,onClick:t.handleStart,loading:t.loading}),{default:p(()=>[F(I(t.getButtonText),1)]),_:1},16,["disabled","onClick","loading"])}const g=C(V,[["render",q]]),E={value:{type:String},size:{type:String,validator:t=>["default","large","small"].includes(t)},count:{type:Number,default:60},sendCodeApi:{type:Function,default:null}},H=m({name:"CountDownInput",components:{CountButton:g},inheritAttrs:!1,props:E,setup(t){const{prefixCls:o}=A("countdown-input"),[e]=Q(t);return{prefixCls:o,state:e}}});function K(t,o,e,c,u,l){const a=i("CountButton"),r=i("a-input");return y(),S(r,v(t.$attrs,{class:t.prefixCls,size:t.size,value:t.state}),k({addonAfter:p(()=>[P(a,{size:t.size,count:t.count,value:t.state,beforeStartFunc:t.sendCodeApi},null,8,["size","count","value","beforeStartFunc"])]),_:2},[N(Object.keys(t.$slots).filter(n=>n!=="addonAfter"),n=>({name:n,fn:p(s=>[T(t.$slots,n,j(D(s||{})))])}))]),1040,["class","size","value"])}const L=C(H,[["render",K]]),U=b(L);b(g);export{U as C};
