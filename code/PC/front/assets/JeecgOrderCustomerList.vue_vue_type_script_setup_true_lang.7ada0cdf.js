var l=(C,u,r)=>new Promise((p,c)=>{var m=t=>{try{i(r.next(t))}catch(n){c(n)}},b=t=>{try{i(r.throw(t))}catch(n){c(n)}},i=t=>t.done?p(t.value):Promise.resolve(t.value).then(m,b);i((r=r.apply(C,u)).next())});import j from"./BasicTable.7f769694.js";import{T as z}from"./componentMap.6f8f51f6.js";import"./BasicTable.vue_vue_type_style_index_0_lang.734e51fc.js";import"./TableImg.vue_vue_type_style_index_0_lang.c653d5f6.js";import{j as D,bj as N,m as V,bI as O,E as P,K as a,i as y,r as d,s as F,t as U,v as o,w as s,y as g,Q as $,R as H,u as J}from"./index.d13d32e3.js";import{_ as Q}from"./JeecgOrderCustomerModal.vue_vue_type_script_setup_true_lang.f7f59c1c.js";import{useListPage as q}from"./useListPage.6b1e9ff2.js";import"./index.1c9272fa.js";import{c as G,a as W,d as X,b as Y}from"./erplist.api.2ced1d41.js";const ie=D({__name:"JeecgOrderCustomerList",setup(C){const u=N("orderId",V(()=>"")),r=J(),[p,{openModal:c}]=O(),m={},{prefixCls:b,tableContext:i}=q({tableProps:{api:E,tableSetting:{cacheKey:"customer"},columns:G,canResize:!1,useSearchForm:!1,actionColumn:{width:180},pagination:{current:1,pageSize:5,pageSizeOptions:["5","10","20"]}}}),[t,{reload:n,setSelectedRowKeys:I},{rowSelection:B,selectedRowKeys:_}]=i;P(u,()=>{m.orderId=a(u),n(),I([])});function E(e){return l(this,null,function*(){let{orderId:f}=e;return f==null||y(f)?[]:yield W(e)})}function S(){if(console.log("orderId=====\u300B",u),y(a(u))){r.createMessage.warning("\u8BF7\u9009\u62E9\u4E00\u4E2A\u8BA2\u5355\u4FE1\u606F");return}c(!0,{isUpdate:!1,showFooter:!0})}function k(e){return l(this,null,function*(){c(!0,{record:e,isUpdate:!0,showFooter:!0})})}function R(e){return l(this,null,function*(){yield Y({id:e.id},n)})}function v(){return l(this,null,function*(){yield X({ids:_.value},()=>{_.value=[],n()})})}function T(){n()}function x(e){return[{label:"\u7F16\u8F91",onClick:k.bind(null,e)},{label:"\u5220\u9664",popConfirm:{title:"\u662F\u5426\u786E\u8BA4\u5220\u9664",confirm:R.bind(null,e)}}]}return(e,f)=>{const w=d("a-button"),h=d("Icon"),A=d("a-menu-item"),M=d("a-menu"),K=d("a-dropdown");return F(),U("div",null,[o(a(j),{onRegister:a(t),rowSelection:a(B),searchInfo:m},{tableTitle:s(()=>[o(w,{type:"primary",preIcon:"ant-design:plus-outlined",onClick:S},{default:s(()=>[g(" \u65B0\u589E")]),_:1}),a(_).length>0?(F(),$(K,{key:0},{overlay:s(()=>[o(M,null,{default:s(()=>[o(A,{key:"1",onClick:v},{default:s(()=>[o(h,{icon:"ant-design:delete-outlined"}),g(" \u5220\u9664 ")]),_:1})]),_:1})]),default:s(()=>[o(w,null,{default:s(()=>[g("\u6279\u91CF\u64CD\u4F5C "),o(h,{icon:"mdi:chevron-down"})]),_:1})]),_:1})):H("",!0)]),action:s(({record:L})=>[o(a(z),{actions:x(L)},null,8,["actions"])]),_:1},8,["onRegister","rowSelection"]),o(Q,{onRegister:a(p),onSuccess:T},null,8,["onRegister"])])}}});export{ie as _};
