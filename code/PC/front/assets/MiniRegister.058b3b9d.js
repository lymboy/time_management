var A=Object.defineProperty,J=Object.defineProperties;var L=Object.getOwnPropertyDescriptors;var B=Object.getOwnPropertySymbols;var Q=Object.prototype.hasOwnProperty,X=Object.prototype.propertyIsEnumerable;var F=(r,t,i)=>t in r?A(r,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):r[t]=i,D=(r,t)=>{for(var i in t||(t={}))Q.call(t,i)&&F(r,i,t[i]);if(B)for(var i of B(t))X.call(t,i)&&F(r,i,t[i]);return r},O=(r,t)=>J(r,L(t));var M=(r,t,i)=>new Promise((o,g)=>{var U=s=>{try{y(i.next(s))}catch(m){g(m)}},d=s=>{try{y(i.throw(s))}catch(m){g(m)}},y=s=>s.done?o(s.value):Promise.resolve(s.value).then(U,d);y((i=i.apply(r,t)).next())});import{j,o as Y,C as h,a8 as Z,r as I,s as f,t as _,aW as e,K as n,v as l,w as v,z as k,R as S,dc as ss,ez as es,eJ as os,ac as ns,u as as,q as is}from"./index.d13d32e3.js";import{a as ls}from"./jeecg_ad_text.73024f5b.js";const $="/assets/icon-eye-k.62c61241.png",V="/assets/icon-eye-g.a35cc0c0.png",ts={class:"aui-content"},cs={class:"aui-container"},rs={class:"aui-form"},us={class:"aui-image"},ds={class:"aui-image-text"},ms=["src"],ps={class:"aui-formBox"},fs={class:"aui-formWell"},_s={class:"aui-flex aui-form-nav aui-clear-left",style:{"padding-bottom":"21px"}},vs={class:"aui-flex-box activeNav on"},gs={class:"aui-form-box"},ys={class:"aui-account aui-account-line"},ws={class:"aui-input-line"},xs={class:"aui-input-line"},hs={class:"aui-input-line"},ks={key:1,class:"aui-code-line"},bs={class:"aui-input-line"},Cs={class:"aui-eye"},Is=["src"],Ps=["src"],Ts={class:"aui-input-line"},Es={class:"aui-eye"},Ms=["src"],Us=["src"],Rs={class:"aui-flex"},Ns={class:"aui-flex-box"},Bs={class:"aui-choice"},Fs={style:{color:"#1b90ff","margin-left":"4px"}},Ds={class:"aui-formButton"},Os={class:"aui-flex"},Ss={class:"aui-flex"},$s=j({name:"mini-register"}),Vs=j(O(D({},$s),{emits:["go-back","success","register"],setup(r,{expose:t,emit:i}){const{t:o}=Y(),{notification:g,createErrorModal:U,createMessage:d}=as(),y=h(),s=Z({username:"",mobile:"",smscode:"",password:"",confirmPassword:"",policy:!1}),m=h(!0),w=h(60),p=h(null),P=h("close"),T=h("close");function z(){i("go-back"),E()}function G(){return M(this,null,function*(){if(!s.mobile){d.warn(o("sys.login.mobilePlaceholder"));return}(yield ss({mobile:s.mobile,smsmode:es.REGISTER}))&&(n(p)||(w.value=60,m.value=!1,p.value=setInterval(()=>{n(w)>0&&n(w)<=60?w.value=w.value-1:(m.value=!0,clearInterval(n(p)),p.value=null)},1e3)))})}function H(){if(!s.username){d.warn(o("sys.login.accountPlaceholder"));return}if(!s.mobile){d.warn(o("sys.login.mobilePlaceholder"));return}if(!s.smscode){d.warn(o("sys.login.smsPlaceholder"));return}if(!s.password){d.warn(o("sys.login.passwordPlaceholder"));return}if(!s.confirmPassword){d.warn(o("sys.login.confirmPassword"));return}if(s.password!==s.confirmPassword){d.warn(o("sys.login.diffPwd"));return}if(!s.policy){d.warn(o("sys.login.policyPlaceholder"));return}K()}function K(){return M(this,null,function*(){try{const u=yield os(ns({username:s.username,password:s.password,phone:s.mobile,smscode:s.smscode}));u&&u.data.success?(g.success({description:u.data.message||o("sys.api.registerMsg"),duration:3}),i("success",{username:s.username,password:s.password}),E()):g.warning({message:o("sys.api.errorTip"),description:u.data.message||o("sys.api.networkExceptionMsg"),duration:3})}catch(u){g.error({message:o("sys.api.errorTip"),description:u.message||o("sys.api.networkExceptionMsg"),duration:3})}})}function E(){Object.assign(s,{username:"",mobile:"",smscode:"",password:"",confirmPassword:"",policy:!1}),n(p)||(m.value=!0,clearInterval(n(p)),p.value=null),y.value.resetFields()}function R(u){P.value=u}function N(u){T.value=u}return t({initForm:E}),(u,a)=>{const b=I("Icon"),C=I("a-input"),x=I("a-form-item"),W=I("a-checkbox"),q=I("a-form");return f(),_("div",ts,[e("div",cs,[e("div",rs,[e("div",us,[e("div",ds,[e("img",{src:n(ls),alt:""},null,8,ms)])]),e("div",ps,[e("div",fs,[l(q,{ref_key:"formRef",ref:y,model:s},{default:v(()=>[e("div",_s,[e("div",vs,k(n(o)("sys.login.signUpFormTitle")),1)]),e("div",gs,[e("div",ys,[l(x,null,{default:v(()=>[e("div",ws,[l(b,{class:"aui-icon",icon:"ant-design:user-outlined"}),l(C,{class:"fix-auto-fill",type:"text",placeholder:n(o)("sys.login.userName"),value:s.username,"onUpdate:value":a[0]||(a[0]=c=>s.username=c)},null,8,["placeholder","value"])])]),_:1}),l(x,null,{default:v(()=>[e("div",xs,[l(b,{class:"aui-icon",icon:"ant-design:mobile-outlined"}),l(C,{class:"fix-auto-fill",type:"text",placeholder:n(o)("sys.login.mobile"),value:s.mobile,"onUpdate:value":a[1]||(a[1]=c=>s.mobile=c)},null,8,["placeholder","value"])])]),_:1}),l(x,null,{default:v(()=>[e("div",hs,[l(b,{class:"aui-icon",icon:"ant-design:mail-outlined"}),l(C,{class:"fix-auto-fill",type:"text",placeholder:n(o)("sys.login.smsCode"),value:s.smscode,"onUpdate:value":a[2]||(a[2]=c=>s.smscode=c)},null,8,["placeholder","value"]),m.value?(f(),_("div",{key:0,class:"aui-code-line",onClick:G},k(n(o)("component.countdown.normalText")),1)):(f(),_("div",ks,k(n(o)("component.countdown.sendText",[n(w.value)])),1))])]),_:1}),l(x,null,{default:v(()=>[e("div",bs,[l(b,{class:"aui-icon",icon:"ant-design:lock-outlined"}),l(C,{class:"fix-auto-fill",type:P.value==="close"?"password":"text",placeholder:n(o)("sys.login.password"),value:s.password,"onUpdate:value":a[3]||(a[3]=c=>s.password=c)},null,8,["type","placeholder","value"]),e("div",Cs,[P.value==="open"?(f(),_("img",{key:0,src:n($),alt:"\u5F00\u542F",onClick:a[4]||(a[4]=c=>R("close"))},null,8,Is)):P.value==="close"?(f(),_("img",{key:1,src:n(V),alt:"\u5173\u95ED",onClick:a[5]||(a[5]=c=>R("open"))},null,8,Ps)):S("",!0)])])]),_:1}),l(x,null,{default:v(()=>[e("div",Ts,[l(b,{class:"aui-icon",icon:"ant-design:lock-outlined"}),l(C,{class:"fix-auto-fill",type:T.value==="close"?"password":"text",placeholder:n(o)("sys.login.confirmPassword"),value:s.confirmPassword,"onUpdate:value":a[6]||(a[6]=c=>s.confirmPassword=c)},null,8,["type","placeholder","value"]),e("div",Es,[T.value==="open"?(f(),_("img",{key:0,src:n($),alt:"\u5F00\u542F",onClick:a[7]||(a[7]=c=>N("close"))},null,8,Ms)):T.value==="close"?(f(),_("img",{key:1,src:n(V),alt:"\u5173\u95ED",onClick:a[8]||(a[8]=c=>N("open"))},null,8,Us)):S("",!0)])])]),_:1}),l(x,{name:"policy"},{default:v(()=>[e("div",Rs,[e("div",Ns,[e("div",Bs,[l(W,{checked:s.policy,"onUpdate:checked":a[9]||(a[9]=c=>s.policy=c)},null,8,["checked"]),e("span",Fs,k(n(o)("sys.login.policy")),1)])])])]),_:1})])]),e("div",Ds,[e("div",Os,[e("a",{class:"aui-link-login aui-flex-box",onClick:H},k(n(o)("sys.login.registerButton")),1)]),e("div",Ss,[e("a",{class:"aui-linek-code aui-flex-box",onClick:z},k(n(o)("sys.login.backSignIn")),1)])])]),_:1},8,["model"])])])])])])}}}));const Hs=is(Vs,[["__scopeId","data-v-957b4d14"]]);export{Hs as default};
