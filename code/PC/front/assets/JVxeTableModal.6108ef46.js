var J=Object.defineProperty,q=Object.defineProperties;var H=Object.getOwnPropertyDescriptors;var h=Object.getOwnPropertySymbols;var N=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable;var R=(e,t,o)=>t in e?J(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,S=(e,t)=>{for(var o in t||(t={}))N.call(t,o)&&R(e,o,t[o]);if(h)for(var o of h(t))Y.call(t,o)&&R(e,o,t[o]);return e},T=(e,t)=>q(e,H(t));var E=(e,t,o)=>new Promise((b,m)=>{var v=l=>{try{s(o.next(l))}catch(p){m(p)}},c=l=>{try{s(o.throw(l))}catch(p){m(p)}},s=l=>l.done?b(l.value):Promise.resolve(l.value).then(v,c);s((o=o.apply(e,t)).next())});import{B as z}from"./index.1c9272fa.js";import{e8 as f,j as I,e9 as P,C as M,a8 as B,bH as Q,m as X,K as w,q as G,r as d,s as W,Q as Z,w as u,v as a,y as $,x}from"./index.d13d32e3.js";import{o as ee,a as te,s as ae}from"./jvxetable.api.5fa182b2.js";import{useJvxeMethod as oe}from"./useJvxeMethods.685d5cc7.js";import"./BasicModal.d291574e.js";import"./useWindowSizeFn.67dc54bf.js";import"./vxeUtils.4caa16eb.js";const ue=[{title:"\u5BA2\u6237\u540D",key:"name",width:180,type:f.input,defaultValue:"",placeholder:"\u8BF7\u8F93\u5165${title}",validateRules:[{required:!0,message:"${title}\u4E0D\u80FD\u4E3A\u7A7A"}]},{title:"\u6027\u522B",key:"sex",width:180,type:f.select,options:[{title:"\u7537",value:"1"},{title:"\u5973",value:"2"}],defaultValue:"",placeholder:"\u8BF7\u9009\u62E9${title}"},{title:"\u8EAB\u4EFD\u8BC1\u53F7",key:"idcard",width:180,type:f.input,defaultValue:"",placeholder:"\u8BF7\u8F93\u5165${title}",validateRules:[{pattern:"^\\d{6}(18|19|20)?\\d{2}(0[1-9]|1[012])(0[1-9]|[12]\\d|3[01])\\d{3}(\\d|[xX])$",message:"${title}\u683C\u5F0F\u4E0D\u6B63\u786E"}]},{title:"\u624B\u673A\u53F7",key:"telphone",width:180,type:f.input,defaultValue:"",placeholder:"\u8BF7\u8F93\u5165${title}",validateRules:[{pattern:"^1[3456789]\\d{9}$",message:"${title}\u683C\u5F0F\u4E0D\u6B63\u786E"}]}],le=[{title:"\u822A\u73ED\u53F7",key:"ticketCode",width:180,type:f.input,defaultValue:"",placeholder:"\u8BF7\u8F93\u5165${title}",validateRules:[{required:!0,message:"${title}\u4E0D\u80FD\u4E3A\u7A7A"}]},{title:"\u822A\u73ED\u65F6\u95F4",key:"tickectDate",width:180,type:f.date,placeholder:"\u8BF7\u9009\u62E9${title}",defaultValue:""}],re=I({name:"JVexTableModal",components:{BasicModal:z,JVxeTable:P},emits:["success","register"],setup(e,{emit:t}){const o=M(!0),b=M(),m=M(),v=M(["tableRef1","tableRef2"]),c=M("tableRef1"),s={tableRef1:b,tableRef2:m},l=B({xs:{span:24},sm:{span:5}}),p=B({xs:{span:24},sm:{span:16}}),g=B({loading:!1,dataSource:[],columns:ue}),F=B({loading:!1,dataSource:[],columns:le}),r=B({id:null,orderCode:"",orderMoney:"",ctype:"",content:"",jeecgOrderCustomerList:[],jeecgOrderTicketList:[]}),[y,C,A,_]=oe(K,j,s,c,v),[k,{setModalProps:n,closeModal:V}]=Q(i=>E(this,null,function*(){if(n({confirmLoading:!1}),U(),o.value=!!(i!=null&&i.isUpdate),w(o)){Object.assign(r,i.record);let D={id:r.id};A(ee,D,g),A(te,D,F)}})),O={orderCode:[{required:!0,message:"\u8BA2\u5355\u53F7\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]},L=X(()=>w(o)?"\u7F16\u8F91":"\u65B0\u589E");function j(i){let D=Object.assign(r,i.formValue);return T(S({},D),{jeecgOrderCustomerList:i.tablesValue[0].tableData,jeecgOrderTicketList:i.tablesValue[1].tableData})}function U(){r.id=null,r.orderCode="",r.orderMoney="",r.orderDate=null,r.ctype="",r.content="",r.jeecgOrderCustomerList=[],r.jeecgOrderTicketList=[],g.dataSource=[],F.dataSource=[]}function K(i){return E(this,null,function*(){n({confirmLoading:!0}),yield ae(i,w(o)),V(),t("success")})}return{formRef:_,activeKey:c,table1:g,table2:F,tableRef1:b,tableRef2:m,getTitle:L,labelCol:l,wrapperCol:p,validatorRules:O,orderMainModel:r,registerModal:k,handleChangeTabs:y,handleSubmit:C}}});function ne(e,t,o,b,m,v){const c=d("a-input"),s=d("a-form-item"),l=d("a-col"),p=d("a-select-option"),g=d("a-select"),F=d("a-date-picker"),r=d("a-row"),y=d("JVxeTable"),C=d("a-tab-pane"),A=d("a-tabs"),_=d("a-form"),k=d("BasicModal");return W(),Z(k,x(e.$attrs,{onRegister:e.registerModal,title:e.getTitle,onOk:e.handleSubmit,width:"70%"}),{default:u(()=>[a(_,{ref:"formRef",model:e.orderMainModel,"label-col":e.labelCol,"wrapper-col":e.wrapperCol,rules:e.validatorRules},{default:u(()=>[a(r,{class:"form-row",gutter:16},{default:u(()=>[a(l,{lg:8},{default:u(()=>[a(s,{label:"\u8BA2\u5355\u53F7",name:"orderCode"},{default:u(()=>[a(c,{value:e.orderMainModel.orderCode,"onUpdate:value":t[0]||(t[0]=n=>e.orderMainModel.orderCode=n),placeholder:"\u8BF7\u8F93\u5165\u8BA2\u5355\u53F7"},null,8,["value"])]),_:1})]),_:1}),a(l,{lg:8},{default:u(()=>[a(s,{label:"\u8BA2\u5355\u7C7B\u578B",name:"ctype"},{default:u(()=>[a(g,{placeholder:"\u8BF7\u9009\u62E9\u8BA2\u5355\u7C7B\u578B",value:e.orderMainModel.ctype,"onUpdate:value":t[1]||(t[1]=n=>e.orderMainModel.ctype=n)},{default:u(()=>[a(p,{value:"1"},{default:u(()=>[$("\u56FD\u5185\u8BA2\u5355")]),_:1}),a(p,{value:"2"},{default:u(()=>[$("\u56FD\u9645\u8BA2\u5355")]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),a(l,{lg:8},{default:u(()=>[a(s,{label:"\u8BA2\u5355\u65E5\u671F",name:"orderDate"},{default:u(()=>[a(F,{showTime:"",valueFormat:"YYYY-MM-DD HH:mm:ss",value:e.orderMainModel.orderDate,"onUpdate:value":t[2]||(t[2]=n=>e.orderMainModel.orderDate=n)},null,8,["value"])]),_:1})]),_:1})]),_:1}),a(r,{class:"form-row",gutter:16},{default:u(()=>[a(l,{lg:8},{default:u(()=>[a(s,{label:"\u8BA2\u5355\u91D1\u989D",name:"orderMoney"},{default:u(()=>[a(c,{value:e.orderMainModel.orderMoney,"onUpdate:value":t[3]||(t[3]=n=>e.orderMainModel.orderMoney=n),placeholder:"\u8BF7\u8F93\u5165\u8BA2\u5355\u91D1\u989D"},null,8,["value"])]),_:1})]),_:1}),a(l,{lg:8},{default:u(()=>[a(s,{label:"\u8BA2\u5355\u5907\u6CE8",name:"content"},{default:u(()=>[a(c,{value:e.orderMainModel.content,"onUpdate:value":t[4]||(t[4]=n=>e.orderMainModel.content=n),placeholder:"\u8BF7\u8F93\u5165\u8BA2\u5355\u5907\u6CE8"},null,8,["value"])]),_:1})]),_:1})]),_:1}),a(A,{activeKey:e.activeKey,"onUpdate:activeKey":t[5]||(t[5]=n=>e.activeKey=n),onChange:e.handleChangeTabs},{default:u(()=>[a(C,{tab:"\u5BA2\u6237\u4FE1\u606F",key:"tableRef1"},{default:u(()=>[a(y,{ref:"tableRef1",stripe:"",toolbar:"",rowNumber:"",rowSelection:"",resizable:"",keepSource:"",maxHeight:300,"checkbox-config":{range:!0},loading:e.table1.loading,columns:e.table1.columns,dataSource:e.table1.dataSource},null,8,["loading","columns","dataSource"])]),_:1}),a(C,{tab:"\u673A\u7968\u4FE1\u606F",key:"tableRef2",forceRender:""},{default:u(()=>[a(y,{ref:"tableRef2",stripe:"",toolbar:"",rowNumber:"",rowSelection:"",resizable:"",keepSource:"",maxHeight:300,"checkbox-config":{range:!0},loading:e.table2.loading,columns:e.table2.columns,dataSource:e.table2.dataSource},null,8,["loading","columns","dataSource"])]),_:1})]),_:1},8,["activeKey","onChange"])]),_:1},8,["model","label-col","wrapper-col","rules"])]),_:1},16,["onRegister","title","onOk"])}const ge=G(re,[["render",ne]]);export{ge as default};
